{% extends 'baseapp.html' %}
{% load static %}
{% block head %}


{% endblock %}



{% block contenido %}
    <div class="row">
        <div class="col-7 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 start-0 text-center justify-content-center flex-column">
            <div class="position-relative bg-gradient-primary h-100 m-3 px- border-radius-lg d-flex flex-column justify-content-center"
                 style="background-image: url('{% static 'img/illustrations/illustration-signup.jpg' %}'); background-size: cover;">
            </div>
        </div>
        <div class="col-xl-5 col-lg-5 col-md-5 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-n5">
            <div class="card card-plain">
                <div class="card-header">
                    <h4 class="font-weight-bolder">Iniciar Sesión</h4>
                    <p class="mb-0">Ingrese su Email y Contraseña para ingresar.</p>
                </div>
                <div class="card-body">
                    <form id="id_form_login" action="javascript:;">
                        {% csrf_token %}
                        <div class="input-group input-group-outline mb-3">
                            <label class="form-label">Usuario</label>
                            <input type="text" id="id_usuario" class="form-control">
                        </div>

                        <div class="input-group input-group-outline mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" id="id_clave" class="form-control">
                        </div>

                        <div class="text-center">
                            <a href="javascript:;" id="id_login_usuario"
                               class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0">Iniciar
                                Sesión
                            </a>
                        </div>
                    </form>
                </div>
                <div class="card-footer text-center pt-0 px-lg-2 px-1">

                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script>
        $(function () {
            login_usuario = function () {
                var usuario = $("#id_usuario").val();
                var clave = $("#id_clave").val();
                $.ajax({
                    url: '{{request.path}}',
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        'csrfmiddlewaretoken': '{{ csrf_token }}',
                        'peticion': 'login_usuario',
                        'usuario': usuario,
                        'clave': clave,
                    },
                    success: function (data) {
                        if (data.respuesta === true) {
                            alert("ok");
                        }else{
                            alert(data.mensaje);
                        }

                    },
                    error: function () {
                        alert("Error al iniciar sesión, intentelo más tarde.");
                    }

                });

            };
            $("#id_login_usuario").click(function () {
                login_usuario();
            });
        });

    </script>
{% endblock %}

